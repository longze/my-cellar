<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>cellar</title>
</head>
<body>
首页
<script>
    (function () {

        var handler = function (e) {
            console.log(document);
            // 这里应该是突破口
//            if (e.target == document) {
//                //
//                console.log('-document-');
//            }
//            console.log(e);
        };

        document.addEventListener('click', handler);

        window.check = function (arg) {
            if (arg == handler) {
                alert('win');
            }
        };
    })();

    var originalDocument = document; // 保存原生document
    // 手动触发事件
    var event = new Event('click');
    var div = originalDocument.createElement('div');
    event.target = div;
    event.abc = 'abc';

    Object.defineProperty(
            Event.prototype,
            'target',
            get: function () {
                window.abc = arguments.callee.caller
            }
    );

    Object.defineProperty(event, 'target', {
        value: function (name) {
            return 'win';
        },
        writable: false,
        enumerable: false,
        configurable: true
    });

//    window.document = Object.defineProperty({}, {
//        value: function () {
//            return 'win';
//        }
//    });

    window.document = '123';
    var a = {
         document: '456'
    };
    with(a) {
        originalDocument.dispatchEvent(event);
    }


    var obj = {};

    obj.a = "abc";

    Object.defineProperties(obj,{
        a:{
            configurable: true,
            enumerable: true,
            value: function () {
                return 'aaa';
            },
            writable: true
        }
    });
    obj.a;

//    HTMLAnchorElement.prototype.realAddEventListener = HTMLAnchorElement.prototype.addEventListener;
//
//    HTMLAnchorElement.prototype.addEventListener = function(a,b,c){
//        this.realAddEventListener(a,reportIn,c);
//        this.realAddEventListener(a,b,c);
//        if(!this.lastListenerInfo){  this.lastListenerInfo = new Array()};
//        this.lastListenerInfo.push({a : a, b : b , c : c});
//    };
</script>
</body>
</html>