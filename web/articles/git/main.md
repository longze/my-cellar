# Git 简易概念 与 简易操作手册

> 开源项目的协作利器，学这些开源项目可以从这里开始。

## Git 与 GitHub

Git有广义和狭义另种概念。
广义的Git指一款由Linus Torvalds开发的，诞生于2005年4月的，免费、开源的分布式版本控制系统，相当于svn。
狭义的Git是用“Git这套分布式版本控制系统”部署的一个平台，平台有一个网站，网址是`https://github.com/`，
是全球最大的Git系统（国内的开源中国也有自己的Git系统，但我们不将其简称为Git），Git也可以被企业或个人单独来部署管理私有代码。

GitHub，是一个网站，是一个社群，是一个代码托管平台（不一定是开源的）。
没有GitHub就Git（狭义的）就不会有如此规模，GitHub的主要作用就是展示开源项目，吸引越来越多的人进入到开源中，提供人与人人与项目之间的沟通桥梁。

GitHub是开源的圣地，但开源是靠不开源作为经济支撑的，因为不开源就要交代码托管费，这也是GitHub的运作模式。

## Git基础理念与概念

### Repository
直译为储藏室，国人一般称其为仓库，是存放代码的地方。
和我们平时说的项目相近，由于git是代码托管平台所以需要一个托管单位，`Repository`就是这样一个单位。
在github网站上`Repositories`是自己的仓库列表。

### fork
直译为分叉，没有较好的中文翻译，所以大家一般直接用。fork这个概念是git很重要的一个理念 -- 每人都可以做仓库的主人，是一种人人平等的理念。
每一个 `Repository` 中有人提需求有人补代码，大家用一种松散的方式推动仓库的建设。
为了避免控制权的争夺就提出了 `fork` 的概念。
比如两兄弟盖房子，在封顶的时候发生了分歧，老大要尖顶的，老二要圆顶的怎么办？
在现实世界中只能妥协或折中，但是在代码的世界里可以很好地解决这个问题，老二把房子`fork`出一份来，盖上圆顶，老大继续把原来的房子加上尖顶。
就这样两栋漂亮的房子同时存在，满足着兄弟两的爱好。（童话故事...）。
补充几点：
- 如果我们fork别人的项目，我们的`Repositories`中就会多出一个仓库来，这个仓库已经脱离了原来仓库的控制，可以向与原仓库不同的方向发展；
- 如果没有分歧不建议fork仓库，共建一个繁荣的仓库（实际上这时已经是一个社区了）不是一件很好的事情吗；
- fork出的项目可以发起`pull requests`，将修改推送给原始仓库；
- 强烈建议不要将fork当收藏用

### commit
提交，其实是本地提交，所以在没网的情况下也可以提交，所以提交之后仓库不会有反应。

### push
推送到仓库，推送的内容就是上面`commit`过的内容，一次`push`操作可以推送多个`commit`。如果当前处于分支，需要`merge` 到主干(`master`)才会在 `Contributions` 中有体现。

### pull
与`push`相反，将仓库中的代码拉到本地。

### branch
分支，多用于开发新功能，防止干扰主干代码，分支功能开发完成后`pull requests`主干。
主干默认为`master`。

### release
公开发行，可以为公开发行的版本打标签，方便回溯历史。

### tag
打标签，和在书本里加一个书签类似，常用来做里程碑。
另外公开发行的版本肯定是某次提交之后的代码，tag通常是打在某一次push上的，而这次push之后的代码作为一个可发性版本。

上面提到的操作可以用命令行实现也可以借助IDE或在GitHub网站上完成，
这方面已经有很完善的文档了，请参考下面资料，这里不再叙述。

[GitHub详细教程](http://blog.csdn.net/showhilllee/article/details/27706679)

## GitHub上的一些操作

### 个人主页
登录GitHub后点右上角用户头像下拉框中的 “Your profile” 到个人主页。

### Repository
仓库在个人主页下，有一个名为 `repositories` 的tab页，此tab页下是当前账户下所有仓库的列表。
当前账户自建的仓库和从别人那里fork出的仓库都可以在这里找到。

### branch
从上面 `repositories` 的列表可进入任一仓库，从当前仓库下的 `branches` 链接可进入分支管理页，
可以在此处删除分支，或者将分支合并回主干。

### releases
公开发行的版本列表，
删除某一发行版本可点击标题，在进入的页面中有删除按钮。

### 分支向主干推送内容
切换到分支，右边有一个"弯曲箭头和竖线"的图标(文字标示为"Pull requests")，点击此图标可将分之内容合并到主干。一般的开发流程都不建议直接在主干上修改。在分支开发、测试、review，所有的都没问题了再合并回主干，主干代码永远保持稳定版。

### 主干向分支推送更改内容
主干向分支推送更改内容很容易造成内容冲突，所以如果想这样逆向而行最好先和开发成员打个招呼。方式是在项目页面左边有一个"绿色两个歪箭头按钮"，点击之后到 "Comparing changes" 页面进行推送,多个分支需要推送多次.

## WebStorm 技巧备忘

### 从git上拿项目
工具栏VCS/Checkout/Git，
填写git的地址仓库地址、本地路径、本地项目名称就可以将git上的仓库克隆到本地了。

### 更新分支
右击项目文件，git/repository/pull 从git上获取新的分支信息。

### 切换分支
右下角有编码和Git的版本信息，点击右下角的版本信息上下箭头会出现Git Branches列表，
其中Remote Branches就是Git上的分支列表，
在展开下一级菜单中有Checkout，Compare，Merge，Delete。

### 提交
右击要提交的文件夹，Git/Commit Directory/，填写Commit Message进行提交，也可以提交并推送。
单个文件提交同理。WebStorm 快捷方式 Com + K。

### 推送
右击要提交的文件夹，Git/Repository/Push，选择之前提交过的进行推送。WebStorm快捷方式 Com + Shift + K。

### 主干修改后怎么同步到分支
如果有紧急修复的bug，需要直接在主干修改(新拉一个分支再合并回主干也是一样的)，那么怎么同步到分支呢？
- 1 在点击 Git/Repository/Pull 弹出的对话框中选中所有分支(包括主干)进行更新操作
- 2 在分支上点击右下角的分支控制按钮，找到主干点击后在二级弹窗中点击 Merge
- 3 最后再 Git/Repository/Push 一次，将Merge结果同步到线上分支，这样主干和分支就回到了正常的状态
- 4 如果不进行前三步操作，分支合并到主干时很可能因为冲突不能提交，另外在分支上开发建议先和主干Merge一下在开始开发

### 用WebStorm管理Git目录
有些情况下你可能用其他方式下载了Git项目的目录,用WebStorm打开发现没有Git选项,不能Commit.面对这种情况只需在VCS菜单下点击"Enable Version Control Integration..."在弹出框中选"Git",最后确定就可以了.

## 命令行

发现大多数操作都可以在网站上操作，命令行就不学了...

## 其他

### 忽略文件
有一些中间文件，或者IDE生成的本地配置文件不需要Git托管，可以配置 `.gitignore` 文件进行忽略。 如果文件已经被托管，需要先删除索引: `git rm --cached （文件路径/）文件名`。
可以用 `git status` 对比操作前后文件的状态（是否有更改且需要提交）。
如果已经不小心提交到了Git上，直接在GitHub网站上找到文件进行删除。

## 更多资料

[GitHub详细教程](http://blog.csdn.net/showhilllee/article/details/27706679)

[Sublime 下配置 GitHub](http://www.cnblogs.com/terrylin/archive/2013/04/04/2999465.html)