# Linux 备忘笔记

## chmod -- 权限管理

Linux系统中的每个文件和目录都有访问许可权限，用它来确定谁可以通过何种方式对文件和目录进行访问和操作。文件或目录的访问权限分为只读，只写和可执行三种。

    // 查看文件所属权限
    ls -l
    // 可以看到下面的权限描述
    -rw-rw-r--
    drwxrwxr-x

注意这里共有10个位置，第一个字符指定了文件类型，`d` 代表文件夹，`-` 代表文件。之后的 9 个字母分成三组，r代表只读，w代表写，x代表可执行，横线代表空许可。3 组分别对应不同的用户：文件主 组用户 其他用户。

执行 `ls -l` 可以看到 `dist` 文件夹的权限情况：

    drwxr-xr-x  root  root  dist
    
我们执行命令 `chmod o+w,g+w dist`，发现文件夹的权限变成了这样：

    drwxrwxrwx  root  root  dist

上面命令什么意思？`chomd` 是变更权限的命令。`o+w,g+w` 是给指定用户赋指定权限：

- u 表示“用户（user）”，即文件或目录的所有者。
- g 表示“同组（group）用户”，即与文件属主有相同组ID的所有用户。
- o 表示“其他（others）用户”。
- a 表示“所有（all）用户”。它是系统默认值。

操作符号可以是：

- + 添加某个权限。
- - 取消某个权限。
- = 赋予给定权限并取消其他所有权限（如果有的话）。

后面两项分别是权限和文件夹。

## chgrp -- 改变文件或目录所属的组

    chgrp -R username filename

## chown -- 更改某个文件或目录的属主

    chown -R username filename

## VIM 编辑文件

常用命令

    // 将文件在 VIM 编辑器中打开
    vi filename
    // 唤起输入
    i
    // 保存退出
    esc
    :wq!

还有一些命令你可能用得到：
    
    // 放弃所作修改而直接退到shell下
    :q!
    // 另存为
    :w newfile
    
## 进程相关

启动进程的命令后加 `&`，将进程指定为后台进程，这样可以在 shell 做一些其他事情而不需要再打开新的窗口，如：

    gulp &
    // 启动时会给出一个进程ID，如：32750

但是关闭 shell 或 断开 ssh 连接后进程就退出了，这在开发机上不是我们的期望，我们期望服务一直运行着，这样就轮到 `nohup` 登场了：

    nohup gulp &

那怎么退出进程和重启进程呢？需要知道懂东西有点多我们一点点来。首先是查看进程：

    // 查看所有进程
    ps -e
    // 能找到这样一行进程
    32750 pts/1    00:00:05 gulp

寻找的过程比较费劲，这里有一些技巧：

    // 查看当前用户启动的进程
    ps -u

可以看到形如下面信息：

    USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
    500       1888  0.5  1.9 1339056 159584 pts/1  Sl   10:55   0:05 gulp

如果你启动的进程比较多，会依然不好找，下面是配合 `grep` 进程搜索命令：

    ps -ef -l | grep gulp

最终我们要拿到 PID，这样我们能对线程做一些操作，比如杀掉它：

    kill 1888

- [Shell 前后台进程切换](https://cnbin.github.io/blog/2015/06/15/shell-qian-hou-tai-jin-cheng-qie-huan/)
- [Linux进程管理命令](https://www.zybuluo.com/ghostfn1/note/123409)

## 零碎

### 显示命令的文档

显示命令的文档，如显示 `gulp` 使用文档：

    man gulp
    // 注：按 q 退出
    // 并不是所有命令都提供文档

### 查看文件行数

有些系统生成的文件比较大，怎么能不打开文件统计文件行数呢？

    wc -lcw file1 file2

参数说明：

    -c 统计字节数
    -l 统计行数
    -w 统计字数
    -m 统计字符数
