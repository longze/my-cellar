# 移动端开发备忘

> 记录移动端开发经常用到的技能点和常见问题的解法。

## PPI 理论

PPI 是 Pixel Per Inch by diagonal 的缩写，也就是对角线单位长度上的像素点。还有一种说法是“折算到对角线上的像素数”，一般认为发光原件是正方形的，那么在物理世界中一定长度的屏幕一行的像素单元是可以数出来的，但同样有一个问题，那就是相同像素密度的液晶屏会因为形状不同 ppi 可能会不同。两种解释都不影响我们往下理解，记住它代表像素密度就可以了。

液晶屏发展本来很平稳，苹果凭借其对供配件应商强大的话语权率先打破了这种平静，2010 年乔布斯发布 iPhone4 的时候发明了个营销术语 -- “视网膜屏(Retina)”，达到了 326 ppi，为什么叫视网膜屏呢，乔布斯说正常人的视网膜分辨率极限是 300ppi，也就是 iPhone4 在分辨率上已经做到了极致。可是后来 iPhone6 Plus 将 ppi 提高到了 401，这又是怎么回事，苹果在做没用的性能炫耀吗？

并不是，其实是当年乔布斯耍了个手段，当年他说的正常人指的是视力 1.0 的正常人，但实际情况是视力 1.0 是正常视力的最低值。等等，我带着眼睛，视力不到 1.0 用着做新的 iPhone 是不是白费了？

放轻松，不白费，近视和远视是可以戴眼镜矫正的，只要你的矫正视力大于 1.0 那视网膜屏就不白费，但如果是弱视就真的白废了。

ppi 引发的问题是相同的物理像素占的物理面积并不相同，也就是说相同的内容你想在不同型号的手机上展现出相同的大小是很困难的，比如同样设置 100px 的容器，7 Plus 就要比 6 更大一点，你问我咋知道的，找了两部手机爬上去量的。

附注：PPI 适合表述某一设备的性能，设备宽高比固定的情况下，通过 PPI 和屏幕尺寸可以计算出物理像素；DPI 表示一平方英寸上的像素点，适合不同设备之间性能的比较。

## dpr 和 设备宽度

ppi 提高之后会带来一个问题，那就是相同字号的文字会变小，比如原来在 163ppi 屏幕下 20px 的字高 1 厘米，那么在 326 ppi 屏幕下会小一半左右，为了给开发提供方便提出了屏幕倍率的概念。原本屏幕宽度是用物理像素来描述的，关系是一对一，现在加入了屏幕倍率的概念，屏幕宽度和物理像素的关系就成了一对二或一对三，这样做的好处是开发不需要关心屏幕倍率，之前怎么写现在怎么写就可以了，在渲染中文字或图像原来一像素的转角现在可以用 4 像素(2 倍屏)或 9 像素(3 倍屏)来描述，使得能够呈现更多细节，视觉上就是更清晰。屏幕倍率还有个很洋气的名字 -- dpr，是屏幕上一行像素点数量和设备宽度的比值。操作系统会给应用这个参数，对于 Web 站点来说这个参数是可以选择用或不用的。在 html 的头中有一个设置：

```html
<meta name="viewport" content="width=device-width">
```

设置之后在 CSS 中写的 1px 实际上就已经不是 1 物理像素了，在 dpr 为 2 的屏幕上是 4 物理像素，在 dpr 为 3 的屏幕上是 9 物理像素，对于单色边框影响不大，但是对图片和文字的呈现上可有更多的物理像素做更细致的描述，页面也就更加细腻。

如果不设置，有的浏览器会自动加上(比如手机版 Chrome)，也有一些浏览器会按不设置来处理，常看到的是文字特别小，实际上这种情况下 CSS 中写的 1px 对应 1 物理像素。

你可能听说过 “0.5px 边框画法”这种技术，那如果在 dpr 为 3 的屏幕上还应该有 “0.33px 边框画法”，实际上就是“一物理像素边框画法”，这里不展开给个链接自己看吧: [https://fed.renren.com/2018/03/24/half-of-one-px/](https://fed.renren.com/2018/03/24/half-of-one-px/)
。

